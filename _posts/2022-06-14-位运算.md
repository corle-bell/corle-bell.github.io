---
layout:     post
title: 位运算
subtitle:   副标题
date:       2021-07-29
author:     坏人
header-img: img/the-first.png
catalog: false
    - Unity杂谈
tags: '#杂谈'
---


[位运算](https://so.csdn.net/so/search?q=%E4%BD%8D%E8%BF%90%E7%AE%97&spm=1001.2101.3001.7020)
所有语言里面都有位运算，&，|,^,~,<<,>>,>>>，但是其他语言不清楚，前端估计许多人直接一扫而过，甚至把这玩意和[逻辑或](https://so.csdn.net/so/search?q=%E9%80%BB%E8%BE%91%E6%88%96&spm=1001.2101.3001.7020)与混淆，甚至有的不认识<<,>>>,问这什么意思的那是许多许多。由于这个运算属于底层的二进制的运算，不做详解（详解的话，阅读不易，而且许多人功力不够），只讲一些常用的，（注意位运算性能更好，且容易装逼，稳重的装逼）
1 判断奇偶数
常用的

```
（a%2！=0）
```

位运算

```
a&1   = 0 偶数
a&1   = 1 奇数
```

原理：任何偶数[二进制](https://so.csdn.net/so/search?q=%E4%BA%8C%E8%BF%9B%E5%88%B6&spm=1001.2101.3001.7020)第一位数必定0，而奇数必定是1，而1的二进制就是1，所以可以用这个判断
2 交换变量
一种a = [a=b,b][0],这个确实装逼
其实还有更稳重的方法

```
a^=b;
b^=a;
a^=b;
```

原理：
第一步没啥好说a = a^b
第二步：b=b^a,也就是b=b^a^b,也就是b=a^0,此处换值
第三步：a=a^b 也就是a=a^b^a,也就是b
3 向下取整
一般方法

```
 Math.floor()
```

位运算

```
x|0
```

4 乘以2的n次方 a * (2^n) 等价于

```
x<<n
```

原理：2进制移动一位相当于乘以2

5 取int型变量a的第k位

```
(k=0,1,2……sizeof(int))
a>>k&1
```

6 将int型变量a的第k位清0

```
a=a&~(1<
```

7 将int型变量a的第k位置1

```
a=a|(1<
```

8 int型变量循环左移k次

```

(设sizeof(int)=16)
a=a<>16-k 
```

9 整数的平均值
对于两个整数x,y，如果用 (x+y)/2 求平均值，会产生溢出，因为 x+y 可能会大于INT_MAX，但是我们知道它们的平均值是肯定不会溢出的，我们用如下算法：

```
int average(int x, int y)   //返回X,Y 的平均值
{   
     return (x&y)+((x^y)>>1);
}
```

10 判断一个整数是不是2的幂,对于一个数 x >= 0

```
boolean power2(int x)
{
    return ((x&(x-1))==0)&&(x!=0)；
}
```

11 计算绝对值

```

int abs( int x )
{
  int y ;
  y = x >> 31 ;
  return (x^y)-y ;        //or: (x+y)^y
}
```

12 取模运算转化成位运算 (在不产生溢出的情况下)

```

a % (2^n) 
//等价于 
a & (2^n - 1)
```

13
除法运算转化成位运算 (在不产生溢出的情况下)

```

a / (2^n) 
//等价于 
a>> n
 //例: 12/8 == 12>>3
```

14
判断赋值

```

if (x == a) 
    x= b;
else 
    x= a; 
//等价于 
x= a ^ b ^ x;
```

15
x 的 相反数

```
 (~x+1)
```

16

使用 ^ 切换变量 0 或 1

```
 // if 判断
    if (target) {
        target= 0;
    } else {
        target= 1;
    }
 
    // 三目运算符
    target= target? 0 : 1;
 
    可以使用：
    target^= 1;
    如果target之前是0，可以变成1，如果是1，可以变成0
```


转载自:
https://blog.csdn.net/weixin_36238706/article/details/112448946